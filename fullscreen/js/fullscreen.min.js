(function($){$.fn.fullscreen=function(){const $parent=this
const $children=this.children()
const fullScreen={h:0,size:0,index:0,time:700,parent:$parent,children:$children,init(){this.size=this.children.size()
this.h=$(window).height()
this.setHight()
this.listenWindow()
this.checkScroll()
this.checkTouch()},setHight(){this.parent.css({width:"100%",overflow:"hidden",transition:`all ${this.time}ms ease`,boxSizing:"border-box",transform:`translateY(-${this.index * this.h}px)`})
this.children.height(this.h).css({width:"100%",overflow:"hidden",boxSizing:"border-box"}).addClass("section")},listenWindow(){$(window).resize(()=>{this.h=$(window).height()
this.setHight()})},checkScroll(){let couldRun=true
const scrollFunc=(e)=>{if(couldRun){couldRun=false
e=e||window.event
if(e.wheelDelta){if(e.wheelDelta>0&&this.index>0)this.index--
if(e.wheelDelta<0&&this.index<this.size-1)this.index++}
if(e.detail){if(e.detail<0&&this.index>0)this.index--
if(e.detail>0&&this.index<this.size-1)this.index++}
this.parent.css({transform:`translateY(-${this.index * this.h}px)`})
setTimeout(()=>couldRun=true,this.time)}}
if(document.addEventListener)document.addEventListener('DOMMouseScroll',scrollFunc,false);window.onmousewheel=document.onmousewheel=scrollFunc},checkTouch(){let startX=startY=0
let endX=endY=0
const touchStartFunc=(e)=>{if(e.cancelable&&!e.defaultPrevented)e.preventDefault()
let touch=e.targetTouches[0]
startX=Number(touch.pageX)
startY=Number(touch.pageY)}
const touchEndFunc=(e)=>{if(e.cancelable&&!e.defaultPrevented)e.preventDefault()
let touch=e.changedTouches[0]
endX=touch.pageX
endY=Number(touch.pageY)
if(startY-endY>50&&this.index<this.size-1)this.index++
if(startY-endY<-50&&this.index>0)this.index--
this.parent.css({transform:`translateY(-${this.index * this.h}px)`})}
document.addEventListener("touchstart",touchStartFunc,false)
document.addEventListener("touchend",touchEndFunc,false)}}
fullScreen.init();};})(jQuery);
